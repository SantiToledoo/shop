<!-- app/templates/base.html -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Olistica Store</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/estilos.css') }}">
</head>
<body class="layout-body">
    <header class="header">
        <nav class="nav">
            <div class="nav-container">
                <h1 class="nav-brand">Olistica Store</h1>
                
                <!-- Navegación superior derecha -->
                <div class="top-nav">
                    <a href="{{ url_for('main.index') }}" class="nav-link" data-page="tienda">
                        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.35 2.65c-.14.15-.22.35-.22.55 0 .45.4.8.9.8H19M7 13v4a2 2 0 0 0 2 2h2m0 0a2 2 0 1 0 4 0m-4 0a2 2 0 1 0-4 0"/>
                        </svg>
                        <span>Tienda</span>
                    </a>
                    
                    <a href="#" class="nav-link" data-page="cursos">
                        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                        </svg>
                        <span>Cursos</span>
                    </a>
                    
                    <a href="#" class="nav-link" data-page="nosotros">
                        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        <span>Nosotros</span>
                    </a>
                    
                    <a href="#" class="nav-link" data-page="contacto">
                        <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                            <polyline points="22,6 12,13 2,6"/>
                        </svg>
                        <span>Contacto</span>
                    </a>
                </div>

                <!-- Botón del carrito -->
                <div class="cart-section">
                    <a href="{{ url_for('admin.ver_carrito') }}" class="cart-button">
                        <svg class="cart-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="9" cy="21" r="1"/>
                            <circle cx="20" cy="21" r="1"/>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                        </svg>
                        <span class="cart-text">Carrito</span>
                        <span class="cart-badge" id="cart-count">{{ session.get('carrito')|length if session.get('carrito') else 0 }}</span>
                    </a>
                </div>

                <!-- Toggle para móvil -->
                <button class="mobile-nav-toggle" onclick="toggleMobileNav()">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
            </div>
        </nav>

        <!-- Menú móvil -->
        <div class="mobile-nav" id="mobileNav">
            <a href="{{ url_for('main.index') }}" class="nav-link">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.35 2.65c-.14.15-.22.35-.22.55 0 .45.4.8.9.8H19M7 13v4a2 2 0 0 0 2 2h2m0 0a2 2 0 1 0 4 0m-4 0a2 2 0 1 0-4 0"/>
                </svg>
                <span>Tienda</span>
            </a>
            
            <a href="#" class="nav-link">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
                </svg>
                <span>Cursos</span>
            </a>
            
            <a href="#" class="nav-link">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                </svg>
                <span>Nosotros</span>
            </a>
            
            <a href="#" class="nav-link">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                    <polyline points="22,6 12,13 2,6"/>
                </svg>
                <span>Contacto</span>
            </a>

            <!-- Carrito en menú móvil -->
            <a href="{{ url_for('admin.ver_carrito') }}" class="nav-link">
                <svg class="nav-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="9" cy="21" r="1"/>
                    <circle cx="20" cy="21" r="1"/>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                </svg>
                <span>Carrito</span>
            </a>
        </div>
    </header>

    <!-- Overlay para móvil -->
    <div class="mobile-nav-overlay" id="mobileNavOverlay" onclick="toggleMobileNav()"></div>
        
    <main class="main-content">
        {% block content %}{% endblock %}
    </main>
    
    <footer class="footer">
        <div class="footer-container">
            <p class="footer-text">&copy; 2025 Olistica Store</p>
        </div>
    </footer>

    <script>
    // Estado del menú móvil
    let mobileMenuOpen = false;

    // Función para toggle del menú móvil
    function toggleMobileNav() {
        const mobileNav = document.getElementById('mobileNav');
        const overlay = document.getElementById('mobileNavOverlay');
        const toggle = document.querySelector('.mobile-nav-toggle');
        
        mobileMenuOpen = !mobileMenuOpen;
        
        if (mobileMenuOpen) {
            mobileNav.classList.add('active');
            overlay.classList.add('active');
            toggle.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevenir scroll
        } else {
            mobileNav.classList.remove('active');
            overlay.classList.remove('active');
            toggle.classList.remove('active');
            document.body.style.overflow = ''; // Restaurar scroll
        }
    }

    // Función para cerrar el menú móvil
    function closeMobileNav() {
        const mobileNav = document.getElementById('mobileNav');
        const overlay = document.getElementById('mobileNavOverlay');
        const toggle = document.querySelector('.mobile-nav-toggle');
        
        mobileMenuOpen = false;
        mobileNav.classList.remove('active');
        overlay.classList.remove('active');
        toggle.classList.remove('active');
        document.body.style.overflow = '';
    }

    // Cerrar menú al hacer clic en un enlace (móvil)
    document.addEventListener('DOMContentLoaded', function() {
        // Asegurarse de que el menú móvil esté cerrado al cargar
        closeMobileNav();
        
        // Marcar página activa
        setActiveNavItem();
        
        // Agregar event listeners a los enlaces del menú móvil
        document.querySelectorAll('.mobile-nav-link').forEach(item => {
            item.addEventListener('click', () => {
                closeMobileNav();
            });
        });

        // Cerrar menú al hacer clic en el overlay
        document.getElementById('mobileNavOverlay').addEventListener('click', () => {
            closeMobileNav();
        });
    });

    // Marcar página activa
    function setActiveNavItem() {
        const currentPath = window.location.pathname;
        const navLinks = document.querySelectorAll('.nav-link');
        const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');
        
        // Limpiar clases activas
        navLinks.forEach(link => link.classList.remove('active'));
        mobileNavLinks.forEach(link => link.classList.remove('active'));
        
        // Marcar enlaces activos en navegación desktop
        navLinks.forEach(link => {
            if (link.getAttribute('href') === currentPath) {
                link.classList.add('active');
            }
        });
        
        // Marcar enlaces activos en navegación móvil
        mobileNavLinks.forEach(link => {
            if (link.getAttribute('href') === currentPath) {
                link.classList.add('active');
            }
        });
    }

    // Función para actualizar el contador del carrito
    function updateCartCount(count) {
        const badge = document.getElementById('cart-count');
        if (count > 0) {
            badge.textContent = count;
            badge.style.display = 'flex';
        } else {
            badge.style.display = 'none';
        }
    }

    // Cerrar menú móvil al redimensionar la ventana
    window.addEventListener('resize', function() {
        if (window.innerWidth > 768 && mobileMenuOpen) {
            closeMobileNav();
        }
    });

    // Prevenir que el menú se abra accidentalmente
    window.addEventListener('beforeunload', function() {
        closeMobileNav();
    });
</script>
</body>
</html>
